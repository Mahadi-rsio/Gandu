import{i as p,g as f,$ as e,f as g}from"./index-dfc2d82f-DsbbIDgC.js";import{g as u,d as m,b as h}from"./index.esm2017-Z80AMlUk.js";const b={apiKey:"AIzaSyA7iRhlrgnn44g-NiDJCNTjIZpa0Xt7mY0",authDomain:"flask-chat-9e635.firebaseapp.com",projectId:"flask-chat-9e635",storageBucket:"flask-chat-9e635.appspot.com",messagingSenderId:"594505769024",appId:"1:594505769024:web:280db3b1e516f581ea7fa5",measurementId:"G-YL8QV4KWW5"},n=p(b),x=u(n),r=f(n);function k(t){return new URLSearchParams(window.location.search).get(t)}function y(t){const a=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return a?a[2]:null}function w(t,a,s=7){const i=new Date(Date.now()+s*24*60*60*1e3).toUTCString();document.cookie=`${t}=${a}; expires=${i}; path=/;`}function L(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function c(){e("#loadingSpinner").removeClass("hidden")}function v(){e("#loadingSpinner").addClass("hidden")}function D(t){return t.createdAt&&t.createdAt.toDate&&(t.createdAt=t.createdAt.toDate()),t.updatedAt&&t.updatedAt.toDate&&(t.updatedAt=t.updatedAt.toDate()),t}function C(t){e("#profilePicture").attr("src",t.photoURL||"https://via.placeholder.com/150"),e("#profileName").text(t.name||"User Name"),e("#jobTitle").text(t.jobTitle||"Job Title"),e("#location").text(t.location||"Location not specified"),e("#dob").text(t.dob||"Date of birth not specified"),e("#socialLinks").empty(),t.socials&&Object.entries(t.socials).forEach(([a,s])=>{if(s){let i="";switch(a){case"facebook":i="fab fa-facebook";break;case"linkedin":i="fab fa-linkedin";break;case"github":i="fab fa-github";break;case"telegram":i="fab fa-telegram";break;case"instagram":i="fab fa-instagram";break;case"website":i="fas fa-globe";break;default:i="fas fa-share-alt";break}e("#socialLinks").append(e("<a>",{href:s,target:"_blank",title:a.charAt(0).toUpperCase()+a.slice(1),class:"p-3 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-blue-500 dark:hover:bg-blue-600 transition-colors"}).append(e("<i>",{class:i+" text-xl text-gray-700 dark:text-gray-300"})))}}),e("#aboutText").text(t.about||"No description available").toggleClass("italic",!t.about),e("#skillsList").empty(),t.skills&&t.skills.length>0?t.skills.forEach(a=>{let s=e("<div>",{class:"mb-4"}),i=e("<div>",{class:"flex justify-between mb-2"}).append(e("<span>").text(a.name)).append(e("<span>",{class:"text-blue-500"}).text(a.level+"%")),o=e("<div>",{class:"h-2 bg-gray-300 rounded-full"}),l=e("<div>",{class:"h-full bg-blue-500 rounded-full transition-all duration-500"}).css("width","0%");o.append(l),s.append(i).append(o),e("#skillsList").append(s),setTimeout(()=>{l.css("width",a.level+"%")},100)}):e("#skillsList").append(e("<p>",{class:"text-gray-500 italic"}).text("No skills added yet")),e("#educationList").empty(),t.education&&t.education.length>0?t.education.forEach(a=>{let s=e("<div>",{class:"border-l-4 border-blue-500 pl-4 mb-6"}).append(e("<h3>",{class:"text-lg font-semibold"}).text(a.degree)).append(e("<p>",{class:"text-gray-500 text-sm mb-1"}).text(a.institution)).append(e("<p>",{class:"text-gray-500 text-sm"}).text(a.duration));e("#educationList").append(s)}):e("#educationList").append(e("<p>",{class:"text-gray-500 italic"}).text("No education information available")),e("#experienceList").empty(),t.experience&&t.experience.length>0?t.experience.forEach(a=>{let s=e("<div>",{class:"border-l-4 border-blue-500 pl-4 mb-6"}).append(e("<h3>",{class:"text-xl font-semibold"}).text(a.position)).append(e("<p>",{class:"text-sm text-gray-500 mb-2"}).text(a.company+" â€¢ "+a.duration));if(a.description&&a.description.length>0){let i=e("<ul>",{class:"list-disc list-inside space-y-2"});a.description.forEach(o=>{i.append(e("<li>").text(o))}),s.append(i)}e("#experienceList").append(s)}):e("#experienceList").append(e("<p>",{class:"text-gray-500 italic"}).text("No experience added yet")),e("#projectsList").empty(),t.projects&&t.projects.length>0?t.projects.forEach(a=>{let s=e("<div>",{class:"bg-gray-100 dark:bg-gray-700 p-6 rounded-xl shadow-md"}),i=e("<div>",{class:"flex justify-between items-start mb-4"}),o=e("<div>").append(e("<h3>",{class:"text-lg font-semibold"}).text(a.title)).append(e("<p>",{class:"text-gray-500 text-sm"}).text(a.role));if(i.append(o),a.url&&i.append(e("<a>",{href:a.url,target:"_blank",class:"text-blue-500 hover:text-blue-700 transition-colors"}).append(e("<i>",{class:"fas fa-external-link-alt"}))),s.append(i).append(e("<p>",{class:"text-gray-700 dark:text-gray-300 mb-4"}).text(a.description)),a.technologies&&a.technologies.length>0){let l=e("<div>",{class:"flex flex-wrap gap-2"});a.technologies.forEach(d=>{l.append(e("<span>",{class:"px-3 py-1 bg-blue-100 text-blue-500 rounded-full text-sm"}).text(d))}),s.append(l)}e("#projectsList").append(s)}):e("#projectsList").append(e("<p>",{class:"text-gray-500 italic"}).text("No projects to display")),e("#awardsList").empty(),t.awards&&t.awards.length>0?t.awards.forEach(a=>{let s=e("<div>",{class:"border-l-4 border-blue-500 pl-4 mb-4"}).append(e("<h3>",{class:"text-lg font-semibold"}).text(a.title)).append(e("<p>",{class:"text-gray-500 text-sm"}).text(a.year));e("#awardsList").append(s)}):e("#awardsList").append(e("<p>",{class:"text-gray-500 italic"}).text("No awards added"))}async function E(){try{c();let t=k("uid")||y("uid");if(!t){const i=r.currentUser;if(i)t=i.uid,w("uid",t);else{window.location.href="/index.html";return}}const a=m(x,"profiles",t),s=await h(a);if(s.exists()){const i=D(s.data());C(i)}else console.log("No profile found for UID:",t);e("#mainContent").show()}catch(t){console.error("Error fetching profile:",t),alert("Error loading profile: "+t.message),e("#mainContent").show()}finally{v()}}async function A(){try{await g(r),L("uid"),localStorage.clear(),sessionStorage.clear(),window.location.href="/index.html"}catch(t){console.error("Logout failed:",t),alert("Logout failed: "+t.message)}}function S(){document.documentElement.classList.toggle("dark"),document.documentElement.classList.contains("dark")?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light")}document.addEventListener("DOMContentLoaded",()=>{localStorage.getItem("theme")==="dark"&&document.documentElement.classList.add("dark"),c(),E(),e("#logoutBtn").on("click",A),e("#editProfile").on("click",()=>{window.location.href="/editProfile.html"}),e("#messagesBtn").on("click",()=>{window.location.href="/messages.html"}),e("#darkModeToggle").on("click",S),e("#copyLinkBtn").on("click",()=>{navigator.clipboard.writeText(window.location.href).then(()=>alert("Profile link copied to clipboard")).catch(t=>console.error("Failed to copy:",t))})});
