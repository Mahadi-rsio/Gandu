import{$ as e,i as l,g as c,b as m,a as u,s as h,c as p,d as f}from"./index-dfc2d82f-DsbbIDgC.js";window.$=window.jQuery=e;const g={apiKey:"AIzaSyA7iRhlrgnn44g-NiDJCNTjIZpa0Xt7mY0",authDomain:"flask-chat-9e635.firebaseapp.com",projectId:"flask-chat-9e635",storageBucket:"flask-chat-9e635.appspot.com",messagingSenderId:"594505769024",appId:"1:594505769024:web:280db3b1e516f581ea7fa5",measurementId:"G-YL8QV4KWW5"},w=l(g),d=c(w);async function C(i,s,a){try{return await h(d,a?m:u),(await p(d,i,s)).user}catch(t){throw t}}async function b(i){try{return await f(d,i),"Password reset email sent. Check your inbox."}catch(s){throw s}}e(document).ready(function(){e(".toggle-password").click(function(){const s=e(this).prev("input"),a=s.attr("type")==="password"?"text":"password";s.attr("type",a),e(this).toggleClass("fa-eye fa-eye-slash")}),e("#email").on("input",function(){const s=e(this).val();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?(e(this).removeClass("border-red-500"),e(this).next(".email-error").addClass("hidden")):(e(this).addClass("border-red-500"),e(this).next(".email-error").text("Please enter a valid email").removeClass("hidden"))}),e("#loginForm").submit(async function(s){s.preventDefault();const a=e("#email").val(),t=e("#password").val(),r=e("#rememberMe").is(":checked");e("#error-message").addClass("hidden"),e("#loginButton").prop("disabled",!0),e("#loginButton").html('<i class="fas fa-spinner fa-spin mr-2"></i> Signing In...');try{const n=await C(a,t,r),o=new Date;o.setDate(o.getDate()+(r?7:1)),document.cookie=`uid=${n.uid}; expires=${o.toUTCString()}; path=/; Secure; SameSite=Strict`,window.location.href=`/edit_jq.html?uid=${n.uid}`}catch(n){e("#error-message").text(n.message).removeClass("hidden"),e("#loginButton").html('Login <i class="fas fa-arrow-right ml-2"></i>')}finally{e("#loginButton").prop("disabled",!1)}}),e("#resetForm").click(function(){e("#email, #password").val(""),e(".email-error, .password-error").addClass("hidden")}),e("#forgotPassword").click(()=>e("#resetModal").show()),e("#cancelReset").click(()=>{e("#resetModal").hide(),e("#resetEmail").val(""),e("#reset-error, #reset-success").addClass("hidden")}),e("#resetForm").submit(async function(s){s.preventDefault();const a=e("#resetEmail").val(),t=e("#sendReset");e("#reset-error, #reset-success").addClass("hidden"),t.prop("disabled",!0),t.find("i").removeClass("hidden");try{const r=await b(a);e("#reset-success").text(r).removeClass("hidden"),e("#resetEmail").val(""),setTimeout(()=>e("#resetModal").hide(),3e3)}catch(r){e("#reset-error").text(r.message).removeClass("hidden")}finally{t.prop("disabled",!1),t.find("i").addClass("hidden")}});function i(s){setTimeout(()=>e(s).addClass("hidden"),5e3)}e("#error-message, #reset-error, #reset-success").on("DOMSubtreeModified",function(){e(this).hasClass("hidden")||i(this)})});
