<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>SocialBD</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    .chat-container {
      width: 100%;
      height: 100vh;
      background: #0f0f0f;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .header {
      background: #1c1c1e;
      color: white;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: sticky;
      top: 0;
      z-index: 100;
      padding-top: max(12px, env(safe-area-inset-top));
    }

    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #2a2a2e;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .header-info {
      flex: 1;
    }

    .header-title {
      font-weight: 600;
      font-size: 17px;
    }

    .online-status {
      font-size: 13px;
      color: #34c759;
      margin-top: 2px;
    }

    .message-display {
      flex: 1;
      padding: 16px 12px;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      background: #000;
      scroll-behavior: smooth;
    }

    .message {
      max-width: 85%;
      margin-bottom: 12px;
      padding: 12px 16px;
      border-radius: 17px;
      font-size: 16px;
      line-height: 1.4;
      position: relative;
      word-break: break-word;
      transition: transform 0.2s ease;
    }

    .message.user {
      background: #2a2a2e;
      color: white;
      margin-left: auto;
      border-bottom-right-radius: 4px;
    }

    .message.bot {
      background: #1c1c1e;
      color: white;
      border-bottom-left-radius: 4px;
    }

    .timestamp {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.4);
      margin-top: 4px;
      text-align: right;
    }

    .input-area {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: #1c1c1e;
      position: sticky;
      bottom: 0;
      padding-bottom: max(12px, env(safe-area-inset-bottom));
    }

    #messageInput {
      flex: 1;
      padding: 12px 16px;
      border: none;
      border-radius: 21px;
      font-size: 16px;
      background: #2c2c2e;
      color: white;
      resize: none;
      min-height: 48px;
      max-height: 120px;
      line-height: 1.4;
      caret-color: #007aff;
      enterkeyhint: send;
    }

    #messageInput:focus {
      outline: none;
      box-shadow: 0 0 0 2px #007aff;
    }

    .input-buttons {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .send-button {
      background: #007aff;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s ease;
      flex-shrink: 0;
    }

    .send-button:active {
      background: #0063cc;
      transform: scale(0.95);
    }

    .newline-button {
      background: none;
      border: none;
      color: #007aff;
      padding: 8px;
      display: none;
      font-size: 20px;
    }

    .typing-indicator {
      padding: 8px 16px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 17px;
      font-size: 14px;
      color: #888;
      margin-left: 16px;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
    }

    .typing-dot {
      width: 6px;
      height: 6px;
      background: #888;
      border-radius: 50%;
      animation: typing 1.4s infinite ease-in-out;
    }

    @keyframes typing {
      0%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-4px); }
    }

    @media (hover: none) and (pointer: coarse) {
      .newline-button {
        display: block;
      }
    }

    @media (min-width: 768px) {
      body {
        background: #000;
      }
      .chat-container {
        width: 414px;
        height: 90vh;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
      }
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="header">
      <div class="avatar">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
        </svg>
      </div>
      <div class="header-info">
        <div class="header-title">Support Team</div>
        <div class="online-status">online</div>
      </div>
    </div>

    <div class="message-display" id="messageDisplay">
      <div class="message bot">
        <div>Hello! How can I help you today?</div>
        <div class="timestamp">10:00 AM</div>
      </div>
    </div>

    <div class="input-area">
      <textarea id="messageInput" placeholder="Message" rows="1" enterkeyhint="send"></textarea>
      <div class="input-buttons">
        <button class="newline-button">↵</button>
        <button class="send-button">↑</button>
      </div>
    </div>
  </div>

  <script>
    $(document).ready(function() {
      let typingTimeout;
      let isUserTyping = false;
      const TYPING_DELAY = 1000;

      // Initialize textarea height
      adjustTextarea($('#messageInput'));

      // Typing indicator functions
      function showTypingIndicator() {
        if (!$('.typing-indicator').length) {
          const typingHtml = `
            <div class="typing-indicator">
              <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot" style="animation-delay: 0.2s"></div>
                <div class="typing-dot" style="animation-delay: 0.4s"></div>
              </div>
            </div>
          `;
          $('#messageDisplay').append(typingHtml);
          scrollToBottom();
        }
        clearTimeout(typingTimeout);
        typingTimeout = setTimeout(hideTypingIndicator, TYPING_DELAY);
      }

      function hideTypingIndicator() {
        $('.typing-indicator').remove();
        isUserTyping = false;
      }

      // Message functions
      function createMessage(text, isUser) {
        const time = new Date().toLocaleTimeString([], { 
          hour: '2-digit', 
          minute: '2-digit'
        });
        
        return `
          <div class="message ${isUser ? 'user' : 'bot'}">
            <div>${text.replace(/\n/g, '<br>')}</div>
            <div class="timestamp">${time}</div>
          </div>
        `;
      }

      function adjustTextarea(textarea) {
        textarea.height('auto').height(textarea[0].scrollHeight);
      }

      function scrollToBottom() {
        const container = $('#messageDisplay');
        container.scrollTop(container[0].scrollHeight);
      }

      // Event handlers
      $('#messageInput').on('input', function() {
        adjustTextarea($(this));
        if (!isUserTyping) {
          isUserTyping = true;
          showTypingIndicator();
        }
      });

      $('.newline-button').click(function() {
        const input = $('#messageInput');
        input.val(input.val() + '\n').trigger('input');
        input.focus();
      });

      $('.send-button').click(function(e) {
        e.preventDefault();
        const input = $('#messageInput');
        const message = input.val().trim();

        if (message) {
          hideTypingIndicator();
          $('#messageDisplay').append(createMessage(message, true));
          input.val('');
          adjustTextarea(input);
          scrollToBottom();

          // Simulate bot response
          setTimeout(() => {
            showTypingIndicator();
            setTimeout(() => {
              hideTypingIndicator();
              $('#messageDisplay').append(createMessage('Thank you for your message. We\'ll respond shortly.', false));
              scrollToBottom();
            }, 1500);
          }, 500);
        }
      });

      $('#messageInput').on('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey && !e.altKey) {
          if (e.ctrlKey || e.metaKey) return;
          e.preventDefault();
          $('.send-button').click();
        }
      });

      // Handle mobile keyboard
      $(window).on('resize', function() {
        scrollToBottom();
      });
    });
  </script>
</body>
</html>